<form>
  <div class="form-group">
    <label>PDF Source:</label>
    <div class="pdf-source-selector">
      <div class="source-option">
        <input type="radio" id="upload-pdf" name="pdf_source" value="upload" checked>
        <label for="upload-pdf">Upload PDF</label>
      </div>
      <div class="source-option">
        <input type="radio" id="server-pdf" name="pdf_source" value="server">
        <label for="server-pdf">Select from Server</label>
      </div>
    </div>
  </div>
  
  <div class="form-group file-upload" id="upload-section" role="region" aria-labelledby="upload-label">
    <label for="pdf-upload" id="upload-label" class="file-upload-label">
      <i class="fas fa-file-pdf" aria-hidden="true"></i> Drop PDF file here or click to browse
    </label>
    <input type="file" id="pdf-upload" class="pdf-upload" name="file" accept=".pdf" required aria-required="true" aria-describedby="file-error">
    <div class="file-name" aria-live="polite"></div>
    <div id="file-error" class="error-message hidden" role="alert">Please select a valid PDF file.</div>
  </div>
  
  <div class="form-group server-browser hidden" id="server-section">
    <label for="server-path">Server Directory:</label>
    <div class="server-path-input">
      <input type="text" id="server-path" name="server_path" placeholder="/data/pdf" value="/data/pdf">
      <button type="button" id="browse-server" class="browse-button">
        <i class="fas fa-folder-open"></i> Browse
      </button>
    </div>
    <div class="server-files-list">
      <select id="server-files" name="server_file" size="5" aria-label="Available PDF files" role="listbox">
        <option value="" disabled selected>Select a PDF file...</option>
      </select>
    </div>
  </div>
  
  <div class="form-group">
    <label>Content to Extract:</label>
    <div class="checkbox-group">
      <div class="checkbox-item">
        <input type="checkbox" id="monsters" name="content_types[]" value="monsters" data-checked="extractionOptions.monsters">
        <label for="monsters">Monsters/NPCs</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="spells" name="content_types[]" value="spells" data-checked="extractionOptions.spells">
        <label for="spells">Spells</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="items" name="content_types[]" value="items" data-checked="extractionOptions.items">
        <label for="items">Items</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="backgrounds" name="content_types[]" value="backgrounds" data-checked="extractionOptions.backgrounds">
        <label for="backgrounds">Backgrounds</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="adventures" name="content_types[]" value="adventures" data-checked="extractionOptions.adventures">
        <label for="adventures">Adventures</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="glossary" name="content_types[]" value="glossary" data-checked="extractionOptions.glossary">
        <label for="glossary">Glossary/Index</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="races" name="content_types[]" value="races" data-checked="extractionOptions.races">
        <label for="races">Species/Races</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="traits" name="content_types[]" value="traits" data-checked="extractionOptions.traits">
        <label for="traits">Traits</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="feats" name="content_types[]" value="feats" data-checked="extractionOptions.feats">
        <label for="feats">Feats</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="rolltables" name="content_types[]" value="rolltables" data-checked="extractionOptions.rolltables">
        <label for="rolltables">Roll Tables</label>
      </div>
    </div>
  </div>
  
  <div class="form-group">
    <label for="page-range">Page Range (optional):</label>
    <input type="text" id="page-range" class="page-range" name="page_range" placeholder="e.g., 10-25">
    <p class="hint">Leave blank to process the entire document</p>
  </div>
  
  <button type="submit">
    <i class="fas fa-cogs"></i> Process PDF
  </button>
  
  <div class="message processing-message hidden">
    <i class="fas fa-spinner fa-spin"></i> Processing PDF... This may take a few minutes depending on the file size.
  </div>
  
  <div class="message success-message hidden">
    <i class="fas fa-check-circle"></i> PDF processed successfully! The extracted content has been added to your compendiums.
  </div>
  <div class="message error-message hidden">
    <i class="fas fa-exclamation-circle"></i> <span class="error-text"></span>
  </div>
</form>